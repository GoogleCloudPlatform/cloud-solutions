# Copyright 2023 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: perftest.com.google.cloud.solutions.satools/v1
kind: PtTask
metadata:
  labels:
    app.kubernetes.io/name: pttask
    app.kubernetes.io/instance: pttask-distributed-sample
    app.kubernetes.io/part-of: pt-operator
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: pt-operator
  name: pttask-distributed-sample
spec:
  type: Distribution
  execution:
    - executor: locust
      concurrency: 100
      ramp-up: 10s
      hold-for: 5m
      master: True
      workers: 1
      scenario: test-example
  scenarios:
    test-example:
      default-address: http://blazedemo.com
      script: locustfile.py
  traffics:
    test-example:
      - saKey64: ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAicGxheS1hcGktc2VydmljZSIsCiAgInByaXZhdGVfa2V5X2lkIjogIjdkOWJjOGE0ZDBmMWFjMjQzMDVkNzJkOWMyMzliOTFiMGFhNTIzZjAiLAogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRRE5VRDB2eWY0MytRdTRcbjRDaHpIdVFudnB0N2dVTzhFMy82cVZ2Q0VUOXlVSlRQM2o4V2pWZlhwWS9wTDZJUDFoL0dzQWlYNGFHampPWjJcbms0VThzSmZDVTZuaUNFN0Z6MmhHNkpZRTVuTjNVV09TN1VmdUtiTlQ3TzJYQUJqdEV4WlUzUi9FVXpXTCs1eG1cbkE4WlNRRzFrWXNMb1VrTTNtNkRnUWdBOCtYenZ0OE1TTi8rS3dmcGtCZnRtS2lHMFZQVjVneFdDNEFydnAranhcbmJvSktoQjkxVkRzcW1XQVo0WXN3S1ZnZ3NISTFPV3NaUEdxNVo1UUZDL3c3N0JDR2ZFZCs1MXRRVzU1bHhscEJcbjdCUUFpVWx4ekhrK0Z3cmNTZWgrWVp6aldDbTdDVVZHSmNxSXdLT3RpMzBCUE1CN3VaNnJUd3QyOFNjelBTVnhcblFVTGNkWHh0QWdNQkFBRUNnZ0VBQjVlTSs2ck9ybFJoY0dMZVluSExZbXAwSnBzeWR3RzlsbHl0UVBGRVZTVFJcblJYOUsrbE1jRmozcG93R1k2RmliUFdZM3psUmRZNU1McFFNL0UyNEozcE1iYTBZWWtmK1V6Yjgrem44dVB4RjNcbk1WZDZEbkhqNkxNcDlTaDVLZU1VbWJmMFZQYkN1bFhPaEIvL05URnJnSWZLWW51cDJRckNabHUzTzcwdE4xSmlcblNCYW1qRjJMTHVOVld1SW5ZR3JLM1RROUJpVmhBVEZlQWhud1ErdmVmSkdUc2dVUWdwM2xGZkhya1BraHNRQUNcblc4M2xsQktvMXE4Um9ETXY4WU8xMXhYeTN4Z2w1czJqajNzdlIvQjhsWDcrS3RSQzVObkFnU1FvZW5hS1V6amJcbjdEUnZ5aXdQYVFaQnhCWW9WcVBaaWxjM28zbkdMN0tUN2dTMnFmMmRvUUtCZ1FEcitrTmpDTy9qdWlqVTlpMDBcbkxtc3ltNWpkNVVwOERyeWNoT3F0cGJ0N1g5VzdLWERESmJhQVZKWllUczZOVkF1QkJzRWIrTnMxU1hzeDBOZjhcbmVUUlkwSlF6eHEyWkY0WmVpcmJJVDZySmNHSEtaWjhycVZvR252NUlST1ArWEs3eFR1dVg1RTBGVTA4L1pqKzZcbjJ5NTF5Q0RtMzhaTmt4eXY3b0Vra3JYMXFRS0JnUURldStrdGRjb2JtcDVsdTdKbnhOclF5a2Jia0wwTTRwSHVcbkJRbnpWZHZqR2xOWjZZcmlQaTA2bElXNE5aMCtsL0Q4eWlMRHg1blEvczEwODI3VGhLcDVuV0hDQ1pxUUdLZjVcbjBwaFMwWjYwRzMyRm1rbVhDWXN4cy9iM1lidFpRdGpDaExOSGVSZlNkdllldVNVcFNsTDc4MWpkVnRxNmlpTVRcbmNDSDRzUWdESlFLQmdGbTFELzBNSHJZQnhSZ0FaZnJhVXFJd2lKS0NZaWg3S2JTT3l2QXNldk5SNFZ4L1NvREZcblMzWEpza1hyMzVYV2gzRUxja29COXNOeEpjWXdVSXVJUUNBcldzdThFYTZMUk9lWDhCaUNRTGpIWWtXaEVEdDJcbjYrUnNlTnBjWmhnQ2YvYjRPNVBJbEljYnZwcXBjanpFcWdyWWc3bUJCRS9sUnhpU29NR1lqRmZSQW9HQVk0Ny9cbkJYRDNMQ3VLemRKK1JsLzVwd1lqY2hWYVM1NGl1SS9NQ05iQitOdFZrb1VQclYwNWZrdlJFYXYxWTNzckh2T0RcbllwdWZwNG1kY0w4M05KakNVcVlFZ21Va2ozQlY5UmNyT3ltemxMSU5BMkVacjhkMlRuc3cweGIrVlVISi9maXVcbjRpM0FkalR5Z24wam5UYzVyS0R6Z2N4RzdNYStNdndXVTBGZVlYa0NnWUFxcjllaGhXSG5MQ1ZleHhsd1BjWDhcbmpxSFlRMkJmbm9LV292dS9uWWVaMkY3b0ZXcXJNSmV2S0V4a1ptSThPcUxYK1JrNk5PU255OUJLa2k3OFd4WS9cbnZuaDQrc1RSU2FDS0YvUis5VEs3OGR0QkEzK3B2TS9hak5SU1NxRGhLT1o5OHMxNFhPNE4xSC9HNDVVeUIzbURcbnIzQlNnUUhnTm1kRVpIeGJjNm0vYVE9PVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogImFsbC1na2UtY2x1c3RlckBwbGF5LWFwaS1zZXJ2aWNlLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwKICAiY2xpZW50X2lkIjogIjExMjgwMDUwNzUzMDU0MzEzNTA4MiIsCiAgImF1dGhfdXJpIjogImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoIiwKICAidG9rZW5fdXJpIjogImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuIiwKICAiYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cyIsCiAgImNsaWVudF94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvYWxsLWdrZS1jbHVzdGVyJTQwcGxheS1hcGktc2VydmljZS5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIKfQo=
        gkeCA64: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVMVENDQXBXZ0F3SUJBZ0lSQVBsRWdJeUFkRDJVSXBjdlA0KzVzeTB3RFFZSktvWklodmNOQVFFTEJRQXcKTHpFdE1Dc0dBMVVFQXhNa05UQmxOMlk0TmpjdFkySTNOaTAwTUdVMUxUbGhNekV0WVRCbU56ZGpaVFExWldaaQpNQ0FYRFRJek1ETXdNakF4TWpRd01Wb1lEekl3TlRNd01qSXlNREl5TkRBeFdqQXZNUzB3S3dZRFZRUURFeVExCk1HVTNaamcyTnkxallqYzJMVFF3WlRVdE9XRXpNUzFoTUdZM04yTmxORFZsWm1Jd2dnR2lNQTBHQ1NxR1NJYjMKRFFFQkFRVUFBNElCandBd2dnR0tBb0lCZ1FDcGdUWlVtK2NVM0hJMXdUK3dTMzRVZElCRVByckJMTllTbVRnagpBY09LUVlXcWhjSlFjZHkvWmxmTytZb2owUkZEbEVNSGhkSnh5OGNBZ1BKL3FkeWdIZG1DSHJrTi9LZGtWMVo5Cnp2czB6VjRlbUFwUFowN0o0b3h3MzdPL2RVTGNOdXlxV1VudXVYRCtQRmpueUpSWml3T3NFKzBSd3dmb29ZWGsKcTlmZmJuZTRoY3pLelJVNUtTN01QbmJhUmptaFIybnpFUmJPZ25YQWJmTTY4bzROWjBVWTRYUHIvdFBFUTcxWgp3TUpkeTg5ZWxjV1JETTQvQmxVUG4yRWkvOXI4aThrNUllS3FZdHBKa2ZTWXJJd2FmTmZvNHdJUXl4dmc4MDFMClB5R29MYnRmWFdYVUY5YTBoQm44dTlydkUrZkpYTlNIUTNFYUhrb00rcEJ6bm90MXlFd0tkZEhHS0JJdGpGZUEKNGg1NThiN0tWTVljNmtTMlJxRVJQb0pJWlY3eWZhcVluQW9UbUhMbmsvU29sVXZSSkdNRnRNYjdVMzVLWjZUcQp2MkpYVTVCdWxsYm5YMW5TaUt6RmM5MnFIaDBTd1FJclMyWThXRHBIZWZTR3VNeGxBVEQ3bWhYYWFhU1M5Vy85ClZRNm4vUlgxNjBqdEw5T3grUkE3Ny9vcFZYTUNBd0VBQWFOQ01FQXdEZ1lEVlIwUEFRSC9CQVFEQWdJRU1BOEcKQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGRXZuV3lzci85c3BNd3lyeGlvSjgwRHhiVzBBTUEwRwpDU3FHU0liM0RRRUJDd1VBQTRJQmdRQlVXSmZMUDJBTDI3ajQvNStpWEtZRk9kN01rU25iZTlvQ0lQRkhZRFl1CjZKL0JRc0ZaME5aaURXRG1KL1BWZVo4UjZEYmk0Q3RocnV3NUxtQ0VBMGhjZUU1UlNqWjFRWFp6TC91WUNuT2kKR1hQVWNSdmREME5Ldnd4S3BvY2E2UWNmWVVrUk5RNFY5N2dqekIwUGdkbmFnQUxwRVczY1Q0UVRPNDJzbG93dgo3V2R0bE4xTThUNFNENG1sSU9hbEZnb3FCWXgwTzhVUGRheDg4N1FJWFV4SUtOekxycWh6UTl6TXhXYmJGcEt2Cmc1WTVBY0RCbDUyc1JBNUhuNENBRHM5azFNWEdWZzhSTWRBRjNmL2RTQW55UEx5ZTZTVlZGK3hpM1VjeFJwODkKZ2wxZVlrVGl5eFVlN2dkbmd6Q09UaVpQdFZ6VVNqZFZocm00a2hFWkNPTFJNcWhIUWVDSytocFIyb0RCZWMwNQozbEhLdWIvT2U3TGFVVWdwbG1QRGJTVnVqSWcrZVh1RDZsQ01pNEJHRVRyUnJnZXBqRUxFUXM1TjZsZzlWVnBaCjF3aDhrdDNqdmtzSWlyT2FhMXBDTFZOMGtkSm9PaHIzcDVDemNNWGFZdGlPdmFuMFNCZmNEajc3YUdyY28xMGoKYWs3R2o0STRKZWtlTDkrY2RhV09lbGM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
        gkeEndpoint: https://34.101.115.122
        region: asia-southeast2
        percent: 100
  images:
    test-example:
      masterImage: asia-docker.pkg.dev/play-api-service/test-images/taurus-base
      workerImage: asia-docker.pkg.dev/play-api-service/test-images/locust-worker
  testingOutput:
    logDir: ./config/samples
    ldjson: ./config/samples/locust-workers.ldjson
    bucket: perf-test-achive-cc
