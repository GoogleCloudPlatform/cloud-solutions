# -*- protobuffer -*-
# proto-file: common/proto/google/cloud/solutions/satools/common/manifest.proto
# proto-message: ToolManifest

id: "perfkit-benchmark"
version <
    version: "0.1.0"
    container_image: "asia-southeast1-docker.pkg.dev/reflected-agent-374403/images/perfkit-benchmark"
    container_hash: "sha256:5f8fada0f77d8d37e99edf871e4a9d503f82e92cd65f00e82207053e0b0bae98"
>

details <
    display_name: "Perfkit Benchmark"
    icon_bytes: "data:image/png;base64,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"
    description: "Compare standard machines types using PKB or run custom PKB benchmarks"
    tags: ["performance", "perfkit", "pkb"]
>

roles <
    id: "cloud_run_executor"
    name: "Cloud Run deployer"
    justification: "Perfkit Benchmark needs to deploy and run as a Cloud Run service"
    predefined_role: "roles/run.developer"
>

roles <
    id: "cloud_build_executor"
    name: "Cloud Build Executor"
    justification: "Run PKB on cloud build machines"
    predefined_role: "roles/"
>


resources_created <
    id: "iam.ServiceAccount"
>

resources_created <
    id: "run.Service"
>

resources_created <
    id: "run.Revision"
>

resources_created <
    id: "bigquery.Dataset"
>

resources_created <
    id: "bigquery.Table"
>

resources_created <
    id: "firestore.Database"
>

resources_created <
    id: "pubsub.Topic"
>

resources_created <
    id: "pubsub.Subscription"
>

resources_created <
    id: "storage.Bucket"
>

on_demand_resources <
    id: "compute.Instance"
>

on_demand_resources <
    id: "compute.Firewall"
>

on_demand_resources <
    id: "compute.Network"
>

on_demand_resources <
    id: "compute.Subnetwork"
>

on_demand_resources <
    id: "compute.Route"
>

deployment <
    script_container_image: "asia-southeast1-docker.pkg.dev/reflected-agent-374403/images/diagrams2terraform-deployer"
    script_container_hash: "sha256:20c6521740d03074d825a92abcc6120020d463f1f8cd26b9bf193ef222cdfa43"

    attributes <
        parameter: "projectId"
        name: "Project Id",
        description: "The GCP project id to deploy the tool"
    >
    attributes <
        parameter: "regionId"
        name: "Region",
        description: "The GCP region to deploy the tool"
        default_value: "us-central1"
    >
    attributes <
        parameter: "serviceId"
        name: "Service name",
        description: "The Cloud Run service name to use for deployment"
        default_value: "d2tf"
    >
    attributes <
        parameter: "buildMachineType"
        name: "Cloud Build Machine Type",
        description: "The machine type to use for PKB Cloud build runner"
        default_value: "e2-medium"
    >
>
